<!DOCTYPE html>
<!-- 
    Movie Library - Frontend Application
    ================================
    –≠—Ç–æ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (SPA) –Ω–∞ React –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Ñ–∏–ª—å–º–æ–≤.
    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ FastAPI –±—ç–∫–µ–Ω–¥—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
    - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
    - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ —Ñ–∏–ª—å–º–æ–≤
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏ –∏ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏–ª—å–º–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
-->
<html lang="en">

<head>
    <!-- –ú–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <meta charset="UTF-8"> <!-- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <title>Movie Library</title>
    
    <!-- 
        –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ React –∏ Babel —á–µ—Ä–µ–∑ CDN
        React 18 - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
        ReactDOM - –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ DOM
        Babel - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ JSX –≤ –æ–±—ã—á–Ω—ã–π JavaScript –≤ –±—Ä–∞—É–∑–µ—Ä–µ
    -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Bootstrap 5 CSS - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        /* 
            –°—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ (Netflix-–ø–æ–¥–æ–±–Ω—ã–π —Å—Ç–∏–ª—å)
            ================================
        */
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã - —Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π */
        body {
            background-color: #1a1a2e;
            color: #eee;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å - –±–æ–ª–µ–µ —Ç—ë–º–Ω—ã–π —Å–∏–Ω–∏–π */
        .navbar {
            background-color: #16213e !important;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ - —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω —Å —Å–∏–Ω–µ–π —Ä–∞–º–∫–æ–π */
        .card {
            background-color: #16213e;
            border: 1px solid #0f3460;
            color: #eee;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card-header {
            background-color: #0f3460;
        }

        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ —Ñ–æ—Ä–º - —Ç—ë–º–Ω—ã–µ —Å —Å–≤–µ—Ç–ª—ã–º —Ç–µ–∫—Å—Ç–æ–º */
        .form-control {
            background-color: #0f3460;
            border: 1px solid #1a1a2e;
            color: #eee;
        }

        /* –ü—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ */
        .form-control:focus {
            background-color: #1a1a2e;
            color: #eee;
        }

        /* –û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ - –∫—Ä–∞—Å–Ω–∞—è (–∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –∫–∞–∫ —É Netflix) */
        .btn-primary {
            background-color: #e94560;
            border-color: #e94560;
        }

        /* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É - –±–æ–ª–µ–µ —Ç—ë–º–Ω—ã–π –∫—Ä–∞—Å–Ω—ã–π */
        .btn-primary:hover {
            background-color: #c73e54;
            border-color: #c73e54;
        }

        /* –ö–æ–Ω—Ç—É—Ä–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ - –∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –∏ —Ç–µ–∫—Å—Ç */
        .btn-outline-light {
            border-color: #e94560;
            color: #e94560;
        }

        /* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ - –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
        .btn-outline-light:hover {
            background-color: #e94560;
            color: white;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∏–ª—å–º–∞ - –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        .movie-card {
            transition: transform 0.2s; /* –ü–ª–∞–≤–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
        }

        /* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 2% */
        .movie-card:hover {
            transform: scale(1.02);
        }

        /* –†–µ–π—Ç–∏–Ω–≥ - –∑–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç */
        .rating {
            color: #ffd700;
        }

        /* –°—Å—ã–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ - –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
        .nav-link {
            color: #eee !important;
        }

        /* –ê–∫—Ç–∏–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ - –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç */
        .nav-link.active {
            color: #e94560 !important;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ - —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω */
        .modal-content {
            background-color: #16213e;
            color: #eee;
        }

        /* –ì—Ä–∞–Ω–∏—Ü—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        .modal-header {
            border-bottom: 1px solid #0f3460;
        }

        .modal-footer {
            border-top: 1px solid #0f3460;
        }

        /* –í—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ */
        .dropdown-menu {
            background-color: #16213e;
            border: 1px solid #0f3460;
        }

        .dropdown-item {
            color: #eee;
        }

        .dropdown-item:hover {
            background-color: #0f3460;
            color: #eee;
        }
    </style>
</head>

<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div id="root"></div>

    <!-- 
        –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ JSX (—Ç—Ä–∞–Ω—Å–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è Babel –≤ –æ–±—ã—á–Ω—ã–π JS)
        ================================
    -->
    <script type="text/babel">
        // ============================================================
        // –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        // ============================================================
        
        // API_URL - –±–∞–∑–æ–≤—ã–π URL –±—ç–∫–µ–Ω–¥–∞
        // –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å
        const API_URL = 'http://127.0.0.1:8000/api/v1';

        // ============================================================
        // –ö–û–ù–¢–ï–ö–°–¢ –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò
        // ============================================================
        
        // AuthContext - React Context –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        // –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –±–µ–∑ –ø—Ä–æ–ø—Å–æ–≤
        const AuthContext = React.createContext();

        // ============================================================
        // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø API –ó–ê–ü–†–û–°–û–í
        // ============================================================
        
        /**
         * –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
         * @param {string} endpoint - API —ç–Ω–¥–ø–æ–∏–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, '/movies/')
         * @param {object} options - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ fetch (method, body, headers)
         * @returns {Promise} - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç API –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
         * 
         * –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
         * - –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
         * - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É 401 (–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω) - —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
         * - –ü–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
         */
        const api = async (endpoint, options = {}) => {
            // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ localStorage –±—Ä–∞—É–∑–µ—Ä–∞
            const token = localStorage.getItem('token');
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
            const headers = {
                'Content-Type': 'application/json', // JSON –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                // –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–æ–∫–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization
                ...(token && { Authorization: `Bearer ${token}` }),
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                ...options.headers
            };

            // –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
            const response = await fetch(`${API_URL}${endpoint}`, { ...options, headers });

            // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å 401 (Unauthorized) - —Ç–æ–∫–µ–Ω –∏—Å—Ç—ë–∫ –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
            if (response.status === 401) {
                localStorage.removeItem('token'); // –£–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω
                window.location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
            }

            // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É—Å–ø–µ—à–µ–Ω (4xx, 5xx)
            if (!response.ok) {
                const error = await response.json();
                // –í—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É —Å —Ç–µ–∫—Å—Ç–æ–º –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
                throw new Error(error.detail || 'Something went wrong');
            }

            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
            return response.json();
        };

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Login (–í—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
         * @param {function} onLogin - –∫–æ–ª–±—ç–∫, –≤—ã–∑—ã–≤–∞–µ–º—ã–π –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
         * 
         * –°–æ—Å—Ç–æ—è–Ω–∏—è:
         * - isRegister: true/false - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—Ö–æ–¥–æ–º –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
         * - formData: –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (username, password, email, full_name)
         * - error: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
         */
        function Login({ onLogin }) {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Ä–µ–∂–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤—Ö–æ–¥–∞
            const [isRegister, setIsRegister] = React.useState(false);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const [formData, setFormData] = React.useState({
                username: '',    // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                password: '',    // –ü–∞—Ä–æ–ª—å
                email: '',       // Email (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
                full_name: ''    // –ü–æ–ª–Ω–æ–µ –∏–º—è (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
            });
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            const [error, setError] = React.useState('');

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
             * @param {Event} e - —Å–æ–±—ã—Ç–∏–µ submit —Ñ–æ—Ä–º—ã
             */
            const handleSubmit = async (e) => {
                e.preventDefault(); // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
                setError('');       // –û—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏

                try {
                    // –ï—Å–ª–∏ —Ä–µ–∂–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                    if (isRegister) {
                        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                        await api('/auth/register', {
                            method: 'POST',
                            body: JSON.stringify(formData)
                        });
                        // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –≤—Ö–æ–¥
                        setIsRegister(false);
                        alert('Registration successful! Please login.');
                    } else {
                        // –†–µ–∂–∏–º –≤—Ö–æ–¥–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º form-data —Ñ–æ—Ä–º–∞—Ç –¥–ª—è OAuth2
                        const formBody = new URLSearchParams();
                        formBody.append('username', formData.username);
                        formBody.append('password', formData.password);

                        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Ö–æ–¥
                        const response = await fetch(`${API_URL}/auth/login`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded', // –§–æ—Ä–º–∞—Ç –¥–ª—è OAuth2 password grant
                            },
                            body: formBody.toString()
                        });

                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
                        if (!response.ok) {
                            const error = await response.json();
                            throw new Error(error.detail || 'Login failed');
                        }

                        // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –æ—Ç–≤–µ—Ç–∞
                        const data = await response.json();
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω –≤ localStorage
                        localStorage.setItem('token', data.access_token);
                        // –í—ã–∑—ã–≤–∞–µ–º –∫–æ–ª–±—ç–∫ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
                        onLogin();
                    }
                } catch (err) {
                    // –õ–æ–≤–∏–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—à–∏–±–∫—É
                    setError(err.message);
                }
            };

            // –†–µ–Ω–¥–µ—Ä —Ñ–æ—Ä–º—ã
            return (
                <div className="container mt-5">
                    <div className="row justify-content-center">
                        <div className="col-md-6">
                            <div className="card">
                                <div className="card-header">
                                    <h3 className="text-center">
                                        {isRegister ? 'Register' : 'Login'} {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–æ—Ä–º—ã */}
                                    </h3>
                                </div>
                                <div className="card-body">
                                    {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å */}
                                    {error && <div className="alert alert-danger">{error}</div>}
                                    
                                    {/* –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */}
                                    <form onSubmit={handleSubmit}>
                                        {/* –ü–æ–ª–µ: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */}
                                        <div className="mb-3">
                                            <label className="form-label">Username</label>
                                            <input
                                                type="text"
                                                className="form-control"
                                                value={formData.username}
                                                onChange={(e) => setFormData({ ...formData, username: e.target.value })}
                                                required
                                            />
                                        </div>
                                        
                                        {/* –ü–æ–ª—è, –≤–∏–¥–∏–º—ã–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */}
                                        {isRegister && (
                                            <>
                                                {/* –ü–æ–ª–µ: Email */}
                                                <div className="mb-3">
                                                    <label className="form-label">Email</label>
                                                    <input
                                                        type="email"
                                                        className="form-control"
                                                        value={formData.email}
                                                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                                        required
                                                    />
                                                </div>
                                                {/* –ü–æ–ª–µ: –ü–æ–ª–Ω–æ–µ –∏–º—è */}
                                                <div className="mb-3">
                                                    <label className="form-label">Full Name</label>
                                                    <input
                                                        type="text"
                                                        className="form-control"
                                                        value={formData.full_name}
                                                        onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}
                                                    />
                                                </div>
                                            </>
                                        )}
                                        
                                        {/* –ü–æ–ª–µ: –ü–∞—Ä–æ–ª—å */}
                                        <div className="mb-3">
                                            <label className="form-label">Password</label>
                                            <input
                                                type="password"
                                                className="form-control"
                                                value={formData.password}
                                                onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                                required
                                            />
                                        </div>
                                        
                                        {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã */}
                                        <button type="submit" className="btn btn-primary w-100">
                                            {isRegister ? 'Register' : 'Login'}
                                        </button>
                                    </form>
                                    
                                    {/* –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤—Ö–æ–¥–æ–º –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π */}
                                    <div className="text-center mt-3">
                                        <button
                                            className="btn btn-link"
                                            onClick={() => setIsRegister(!isRegister)}
                                        >
                                            {isRegister ? 'Already have an account? Login' : "Don't have an account? Register"}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Navbar (–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
         * @param {object} user - –æ–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         * @param {function} onLogout - –∫–æ–ª–±—ç–∫ –¥–ª—è –≤—ã—Ö–æ–¥–∞
         * @param {function} setActiveTab - –∫–æ–ª–±—ç–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
         * 
         * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
         * - –õ–æ–≥–æ—Ç–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         * - –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã (Movies, Favorites, Genres, Directors)
         * - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞
         * - –†–∞–∑–¥–µ–ª—ã Genres –∏ Directors –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
         */
        function Navbar({ user, onLogout, setActiveTab }) {
            return (
                <nav className="navbar navbar-expand-lg navbar-dark">
                    <div className="container">
                        {/* –õ–æ–≥–æ—Ç–∏–ø - –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é (Movies) */}
                        <a className="navbar-brand" href="#" onClick={() => setActiveTab('movies')}>
                            üé¨ Movie Library
                        </a>
                        
                        {/* –ö–Ω–æ–ø–∫–∞ "–≥–∞–º–±—É—Ä–≥–µ—Ä" –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */}
                        <button className="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                            <span className="navbar-toggler-icon"></span>
                        </button>
                        
                        {/* –ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */}
                        <div className="collapse navbar-collapse" id="navbarNav">
                            <ul className="navbar-nav me-auto">
                                {/* –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º—ã */}
                                <li className="nav-item">
                                    <a className="nav-link" href="#" onClick={() => setActiveTab('movies')}>Movies</a>
                                </li>
                                {/* –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ */}
                                <li className="nav-item">
                                    <a className="nav-link" href="#" onClick={() => setActiveTab('favorites')}>Favorites</a>
                                </li>
                                {/* –°—Å—ã–ª–∫–∞ –Ω–∞ –∂–∞–Ω—Ä—ã - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */}
                                {user?.is_superuser && (
                                    <>
                                        <li className="nav-item">
                                            <a className="nav-link" href="#" onClick={() => setActiveTab('genres')}>Genres</a>
                                        </li>
                                        {/* –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤ - —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */}
                                        <li className="nav-item">
                                            <a className="nav-link" href="#" onClick={() => setActiveTab('directors')}>Directors</a>
                                        </li>
                                    </>
                                )}
                            </ul>
                            
                            {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */}
                            <div className="d-flex align-items-center">
                                <span className="me-3">{user?.username}</span>
                                <button className="btn btn-outline-light btn-sm" onClick={onLogout}>Logout</button>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Movies (–ö–∞—Ç–∞–ª–æ–≥ —Ñ–∏–ª—å–º–æ–≤)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞–º–∏
         * @param {boolean} isSuperuser - —Ñ–ª–∞–≥, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
         * 
         * –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
         * - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤
         * - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–µ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
         * - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
         * - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
         */
        function Movies({ isSuperuser }) {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
            const [movies, setMovies] = React.useState([]);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
            const [genres, setGenres] = React.useState([]);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
            const [directors, setDirectors] = React.useState([]);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≤–∏–¥–∏–º–æ—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞
            const [showModal, setShowModal] = React.useState(false);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≤–∏–¥–∏–º–æ—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            const [showDetailModal, setShowDetailModal] = React.useState(false);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∏–ª—å–º –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            const [selectedMovie, setSelectedMovie] = React.useState(null);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞
            const [formData, setFormData] = React.useState({
                title: '',          // –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞
                description: '',    // –û–ø–∏—Å–∞–Ω–∏–µ
                release_date: '',   // –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞
                duration: '',       // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
                rating: '',         // –†–µ–π—Ç–∏–Ω–≥
                genre_id: '',       // ID –∂–∞–Ω—Ä–∞
                director_id: ''     // ID —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
            });

            // –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            React.useEffect(() => {
                loadMovies();
                loadGenres();
                loadDirectors();
            }, []);

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤ —Å API
             */
            const loadMovies = async () => {
                try {
                    const data = await api('/movies/');
                    setMovies(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤ —Å API
             */
            const loadGenres = async () => {
                try {
                    const data = await api('/genres/');
                    setGenres(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤ —Å API
             */
            const loadDirectors = async () => {
                try {
                    const data = await api('/directors/');
                    setDirectors(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å–º–∞
             * @param {Event} e - —Å–æ–±—ã—Ç–∏–µ submit —Ñ–æ—Ä–º—ã
             */
            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ API
                    await api('/movies/', {
                        method: 'POST',
                        body: JSON.stringify({
                            ...formData,
                            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∏—Å–ª–∞
                            release_date: formData.release_date || null,
                            duration: formData.duration ? parseInt(formData.duration) : null,
                            rating: formData.rating ? parseFloat(formData.rating) : null,
                            genre_id: parseInt(formData.genre_id),
                            director_id: parseInt(formData.director_id)
                        })
                    });
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    setShowModal(false);
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
                    loadMovies();
                    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                    setFormData({
                        title: '',
                        description: '',
                        release_date: '',
                        duration: '',
                        rating: '',
                        genre_id: '',
                        director_id: ''
                    });
                } catch (err) {
                    alert(err.message);
                }
            };

            /**
             * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
             * @param {number} movieId - ID —Ñ–∏–ª—å–º–∞
             */
            const addToFavorites = async (movieId) => {
                try {
                    await api('/favorites/', {
                        method: 'POST',
                        body: JSON.stringify({ movie_id: movieId })
                    });
                    alert('Added to favorites!');
                } catch (err) {
                    alert(err.message);
                }
            };

            /**
             * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ñ–∏–ª—å–º–µ
             * @param {object} movie - –æ–±—ä–µ–∫—Ç —Ñ–∏–ª—å–º–∞
             */
            const openMovieDetail = (movie) => {
                setSelectedMovie(movie);
                setShowDetailModal(true);
            };

            // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤
            return (
                <div className="container mt-4">
                    {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è */}
                    <div className="d-flex justify-content-between align-items-center mb-4">
                        <h2>Movies</h2>
                        <button className="btn btn-primary" onClick={() => setShowModal(true)}>
                            + Add Movie
                        </button>
                    </div>

                    {/* –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ñ–∏–ª—å–º–æ–≤ */}
                    <div className="row">
                        {movies.map(movie => (
                            <div key={movie.id} className="col-md-4 mb-4">
                                <div className="card movie-card h-100">
                                    <div className="card-body">
                                        {/* –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ */}
                                        <h5 className="card-title">{movie.title}</h5>
                                        {/* –û–ø–∏—Å–∞–Ω–∏–µ (–æ–±—Ä–µ–∑–∞–Ω–æ –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤) */}
                                        <p className="card-text">{movie.description?.substring(0, 100)}...</p>
                                        {/* –ñ–∞–Ω—Ä */}
                                        <p className="mb-1">
                                            <strong>Genre:</strong> {movie.genre?.name || 'N/A'}
                                        </p>
                                        {/* –†–µ–∂–∏—Å—Å—ë—Ä */}
                                        <p className="mb-1">
                                            <strong>Director:</strong> {movie.director ? `${movie.director.first_name} ${movie.director.last_name}` : 'N/A'}
                                        </p>
                                        {/* –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ */}
                                        <p className="mb-1">
                                            <strong>Year:</strong> {movie.release_date ? movie.release_date.split('T')[0] : 'N/A'}
                                        </p>
                                        {/* –†–µ–π—Ç–∏–Ω–≥ */}
                                        <p className="mb-2 rating">
                                            <strong>‚òÖ</strong> {movie.rating || 'N/A'}
                                        </p>
                                        {/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
                                        <div className="d-flex gap-2">
                                            <button
                                                className="btn btn-outline-light btn-sm flex-grow-1"
                                                onClick={() => openMovieDetail(movie)}
                                            >
                                                Details
                                            </button>
                                            <button
                                                className="btn btn-outline-light btn-sm"
                                                onClick={() => addToFavorites(movie.id)}
                                            >
                                                ‚ô°
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* 
                        –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ
                        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ showDetailModal = true –∏ –≤—ã–±—Ä–∞–Ω —Ñ–∏–ª—å–º
                    */}
                    {showDetailModal && selectedMovie && (
                        <div className="modal show d-block" style={{ backgroundColor: 'rgba(0,0,0,0.7)' }}>
                            <div className="modal-dialog modal-lg">
                                <div className="modal-content">
                                    <div className="modal-header">
                                        <h5 className="modal-title">{selectedMovie.title}</h5>
                                        <button type="button" className="btn-close" onClick={() => setShowDetailModal(false)}></button>
                                    </div>
                                    <div className="modal-body">
                                        <div className="row">
                                            <div className="col-12">
                                                <h6 className="text-muted">Description</h6>
                                                <p>{selectedMovie.description || 'No description available'}</p>

                                                <h6 className="text-muted mt-3">Details</h6>
                                                <p><strong>Genre:</strong> {selectedMovie.genre?.name || 'N/A'}</p>
                                                <p><strong>Director:</strong> {selectedMovie.director ? `${selectedMovie.director.first_name} ${selectedMovie.director.last_name}` : 'N/A'}</p>
                                                <p><strong>Biography:</strong> {selectedMovie.director?.biography || 'N/A'}</p>
                                                <p><strong>Release Date:</strong> {selectedMovie.release_date ? selectedMovie.release_date.split('T')[0] : 'N/A'}</p>
                                                <p><strong>Duration:</strong> {selectedMovie.duration ? `${selectedMovie.duration} min` : 'N/A'}</p>
                                                <p className="rating"><strong>Rating:</strong> ‚òÖ {selectedMovie.rating || 'N/A'}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="modal-footer">
                                        <button
                                            className="btn btn-primary"
                                            onClick={() => addToFavorites(selectedMovie.id)}
                                        >
                                            ‚ô° Add to Favorites
                                        </button>
                                        <button type="button" className="btn btn-secondary" onClick={() => setShowDetailModal(false)}>Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* 
                        –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞
                        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ showModal = true
                    */}
                    {showModal && (
                        <div className="modal show d-block" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>
                            <div className="modal-dialog">
                                <div className="modal-content">
                                    <div className="modal-header">
                                        <h5 className="modal-title">Add Movie</h5>
                                        <button type="button" className="btn-close" onClick={() => setShowModal(false)}></button>
                                    </div>
                                    <form onSubmit={handleSubmit}>
                                        <div className="modal-body">
                                            {/* –ü–æ–ª–µ: –ù–∞–∑–≤–∞–Ω–∏–µ */}
                                            <div className="mb-3">
                                                <label className="form-label">Title</label>
                                                <input
                                                    type="text"
                                                    className="form-control"
                                                    value={formData.title}
                                                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                                                    required
                                                />
                                            </div>
                                            {/* –ü–æ–ª–µ: –û–ø–∏—Å–∞–Ω–∏–µ */}
                                            <div className="mb-3">
                                                <label className="form-label">Description</label>
                                                <textarea
                                                    className="form-control"
                                                    value={formData.description}
                                                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                                                />
                                            </div>
                                            {/* –ü–æ–ª–µ: –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ */}
                                            <div className="mb-3">
                                                <label className="form-label">Release Date</label>
                                                <input
                                                    type="date"
                                                    className="form-control"
                                                    value={formData.release_date}
                                                    onChange={(e) => setFormData({ ...formData, release_date: e.target.value })}
                                                />
                                            </div>
                                            {/* –ü–æ–ª–µ: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å */}
                                            <div className="mb-3">
                                                <label className="form-label">Duration (minutes)</label>
                                                <input
                                                    type="number"
                                                    className="form-control"
                                                    value={formData.duration}
                                                    onChange={(e) => setFormData({ ...formData, duration: e.target.value })}
                                                />
                                            </div>
                                            {/* –ü–æ–ª–µ: –†–µ–π—Ç–∏–Ω–≥ */}
                                            <div className="mb-3">
                                                <label className="form-label">Rating</label>
                                                <input
                                                    type="number"
                                                    step="0.1"
                                                    max="10"
                                                    className="form-control"
                                                    value={formData.rating}
                                                    onChange={(e) => setFormData({ ...formData, rating: e.target.value })}
                                                />
                                            </div>
                                            {/* –í—ã–±–æ—Ä –∂–∞–Ω—Ä–∞ */}
                                            <div className="mb-3">
                                                <label className="form-label">Genre</label>
                                                <select
                                                    className="form-control"
                                                    value={formData.genre_id}
                                                    onChange={(e) => setFormData({ ...formData, genre_id: e.target.value })}
                                                    required
                                                >
                                                    <option value="">Select Genre</option>
                                                    {genres.map(g => (
                                                        <option key={g.id} value={g.id}>{g.name}</option>
                                                    ))}
                                                </select>
                                            </div>
                                            {/* –í—ã–±–æ—Ä —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ */}
                                            <div className="mb-3">
                                                <label className="form-label">Director</label>
                                                <select
                                                    className="form-control"
                                                    value={formData.director_id}
                                                    onChange={(e) => setFormData({ ...formData, director_id: e.target.value })}
                                                    required
                                                >
                                                    <option value="">Select Director</option>
                                                    {directors.map(d => (
                                                        <option key={d.id} value={d.id}>{d.first_name} {d.last_name}</option>
                                                    ))}
                                                </select>
                                            </div>
                                        </div>
                                        <div className="modal-footer">
                                            <button type="button" className="btn btn-secondary" onClick={() => setShowModal(false)}>Cancel</button>
                                            <button type="submit" className="btn btn-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Favorites (–ò–∑–±—Ä–∞–Ω–Ω–æ–µ)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         * 
         * –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
         * - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
         * - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
         */
        function Favorites() {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
            const [favorites, setFavorites] = React.useState([]);

            // –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
            React.useEffect(() => {
                loadFavorites();
            }, []);

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
             */
            const loadFavorites = async () => {
                try {
                    const data = await api('/favorites/');
                    setFavorites(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
             * @param {number} id - ID –∑–∞–ø–∏—Å–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º
             */
            const removeFavorite = async (id) => {
                try {
                    await api(`/favorites/${id}`, { method: 'DELETE' });
                    loadFavorites(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
                } catch (err) {
                    alert(err.message);
                }
            };

            // –†–µ–Ω–¥–µ—Ä
            return (
                <div className="container mt-4">
                    <h2>My Favorites</h2>
                    <div className="row">
                        {/* –ï—Å–ª–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ */}
                        {favorites.length === 0 ? (
                            <div className="col-12">
                                <p className="text-center">No favorites yet. Add some movies!</p>
                            </div>
                        ) : (
                            // –ò–Ω–∞—á–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏
                            favorites.map(fav => (
                                <div key={fav.id} className="col-md-4 mb-4">
                                    <div className="card h-100">
                                        <div className="card-body">
                                            {/* –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ (–∏–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ movie) */}
                                            <h5 className="card-title">{fav.movie?.title}</h5>
                                            <p className="mb-1">
                                                <strong>Genre:</strong> {fav.movie?.genre?.name || 'N/A'}
                                            </p>
                                            <p className="mb-1">
                                                <strong>Director:</strong> {fav.movie?.director ? `${fav.movie.director.first_name} ${fav.movie.director.last_name}` : 'N/A'}
                                            </p>
                                            <p className="mb-2 rating">
                                                <strong>‚òÖ</strong> {fav.movie?.rating || 'N/A'}
                                            </p>
                                            <button
                                                className="btn btn-outline-danger btn-sm"
                                                onClick={() => removeFavorite(fav.id)}
                                            >
                                                Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Genres (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∞–Ω—Ä–∞–º–∏ —Ñ–∏–ª—å–º–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
         * 
         * –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
         * - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤
         * - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∂–∞–Ω—Ä–∞
         * - –£–¥–∞–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞
         */
        function Genres() {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤
            const [genres, setGenres] = React.useState([]);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≤–∏–¥–∏–º–æ—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const [showModal, setShowModal] = React.useState(false);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∂–∞–Ω—Ä–∞
            const [newGenre, setNewGenre] = React.useState('');

            // –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∂–∞–Ω—Ä—ã
            React.useEffect(() => {
                loadGenres();
            }, []);

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤
             */
            const loadGenres = async () => {
                try {
                    const data = await api('/genres/');
                    setGenres(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∂–∞–Ω—Ä–∞
             */
            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    await api('/genres/', {
                        method: 'POST',
                        body: JSON.stringify({ name: newGenre })
                    });
                    setShowModal(false);
                    setNewGenre('');
                    loadGenres();
                } catch (err) {
                    alert(err.message);
                }
            };

            /**
             * –£–¥–∞–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞
             * @param {number} id - ID –∂–∞–Ω—Ä–∞
             */
            const deleteGenre = async (id) => {
                try {
                    await api(`/genres/${id}`, { method: 'DELETE' });
                    loadGenres();
                } catch (err) {
                    alert(err.message);
                }
            };

            // –†–µ–Ω–¥–µ—Ä
            return (
                <div className="container mt-4">
                    <div className="d-flex justify-content-between align-items-center mb-4">
                        <h2>Genres</h2>
                        <button className="btn btn-primary" onClick={() => setShowModal(true)}>
                            + Add Genre
                        </button>
                    </div>
                    <div className="row">
                        {genres.map(genre => (
                            <div key={genre.id} className="col-md-3 mb-3">
                                <div className="card">
                                    <div className="card-body d-flex justify-content-between align-items-center">
                                        <span>{genre.name}</span>
                                        <button
                                            className="btn btn-outline-danger btn-sm"
                                            onClick={() => deleteGenre(genre.id)}
                                        >
                                            ‚úï
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∂–∞–Ω—Ä–∞ */}
                    {showModal && (
                        <div className="modal show d-block" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>
                            <div className="modal-dialog">
                                <div className="modal-content">
                                    <div className="modal-header">
                                        <h5 className="modal-title">Add Genre</h5>
                                        <button type="button" className="btn-close" onClick={() => setShowModal(false)}></button>
                                    </div>
                                    <form onSubmit={handleSubmit}>
                                        <div className="modal-body">
                                            <div className="mb-3">
                                                <label className="form-label">Genre Name</label>
                                                <input
                                                    type="text"
                                                    className="form-control"
                                                    value={newGenre}
                                                    onChange={(e) => setNewGenre(e.target.value)}
                                                    required
                                                />
                                            </div>
                                        </div>
                                        <div className="modal-footer">
                                            <button type="button" className="btn btn-secondary" onClick={() => setShowModal(false)}>Cancel</button>
                                            <button type="submit" className="btn btn-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: Directors (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞–º–∏)
        // ============================================================
        
        /**
         * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏—Å—Å—ë—Ä–∞–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
         * 
         * –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
         * - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤
         * - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
         * - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
         */
        function Directors() {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤
            const [directors, setDirectors] = React.useState([]);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≤–∏–¥–∏–º–æ—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const [showModal, setShowModal] = React.useState(false);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const [formData, setFormData] = React.useState({
                first_name: '',   // –ò–º—è
                last_name: '',    // –§–∞–º–∏–ª–∏—è
                biography: ''     // –ë–∏–æ–≥—Ä–∞—Ñ–∏—è
            });

            // –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤
            React.useEffect(() => {
                loadDirectors();
            }, []);

            /**
             * –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤
             */
            const loadDirectors = async () => {
                try {
                    const data = await api('/directors/');
                    setDirectors(data);
                } catch (err) {
                    console.error(err);
                }
            };

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
             */
            const handleSubmit = async (e) => {
                e.preventDefault();
                try {
                    await api('/directors/', {
                        method: 'POST',
                        body: JSON.stringify(formData)
                    });
                    setShowModal(false);
                    setFormData({ first_name: '', last_name: '', biography: '' });
                    loadDirectors();
                } catch (err) {
                    alert(err.message);
                }
            };

            /**
             * –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
             * @param {number} id - ID —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
             */
            const deleteDirector = async (id) => {
                try {
                    await api(`/directors/${id}`, { method: 'DELETE' });
                    loadDirectors();
                } catch (err) {
                    alert(err.message);
                }
            };

            // –†–µ–Ω–¥–µ—Ä
            return (
                <div className="container mt-4">
                    <div className="d-flex justify-content-between align-items-center mb-4">
                        <h2>Directors</h2>
                        <button className="btn btn-primary" onClick={() => setShowModal(true)}>
                            + Add Director
                        </button>
                    </div>
                    <div className="row">
                        {directors.map(director => (
                            <div key={director.id} className="col-md-4 mb-4">
                                <div className="card h-100">
                                    <div className="card-body">
                                        <h5 className="card-title">{director.first_name} {director.last_name}</h5>
                                        <p className="card-text">{director.biography}</p>
                                        <button
                                            className="btn btn-outline-danger btn-sm"
                                            onClick={() => deleteDirector(director.id)}
                                        >
                                            Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ */}
                    {showModal && (
                        <div className="modal show d-block" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>
                            <div className="modal-dialog">
                                <div className="modal-content">
                                    <div className="modal-header">
                                        <h5 className="modal-title">Add Director</h5>
                                        <button type="button" className="btn-close" onClick={() => setShowModal(false)}></button>
                                    </div>
                                    <form onSubmit={handleSubmit}>
                                        <div className="modal-body">
                                            <div className="mb-3">
                                                <label className="form-label">First Name</label>
                                                <input
                                                    type="text"
                                                    className="form-control"
                                                    value={formData.first_name}
                                                    onChange={(e) => setFormData({ ...formData, first_name: e.target.value })}
                                                    required
                                                />
                                            </div>
                                            <div className="mb-3">
                                                <label className="form-label">Last Name</label>
                                                <input
                                                    type="text"
                                                    className="form-control"
                                                    value={formData.last_name}
                                                    onChange={(e) => setFormData({ ...formData, last_name: e.target.value })}
                                                    required
                                                />
                                            </div>
                                            <div className="mb-3">
                                                <label className="form-label">Biography</label>
                                                <textarea
                                                    className="form-control"
                                                    value={formData.biography}
                                                    onChange={(e) => setFormData({ ...formData, biography: e.target.value })}
                                                />
                                            </div>
                                        </div>
                                        <div className="modal-footer">
                                            <button type="button" className="btn btn-secondary" onClick={() => setShowModal(false)}>Cancel</button>
                                            <button type="submit" className="btn btn-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // ============================================================
        // –ö–û–ú–ü–û–ù–ï–ù–¢: App (–ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
        // ============================================================
        
        /**
         * –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
         * –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
         * - user: —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (null –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
         * - activeTab: –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ (movies/favorites/genres/directors)
         * - loading: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
         * 
         * –õ–æ–≥–∏–∫–∞:
         * 1. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ localStorage
         * 2. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å - –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         * 3. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
         * 4. –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
         */
        function App() {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const [user, setUser] = React.useState(null);
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞
            const [activeTab, setActiveTab] = React.useState('movies');
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ: –∑–∞–≥—Ä—É–∑–∫–∞
            const [loading, setLoading] = React.useState(true);

            // –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
            React.useEffect(() => {
                checkAuth();
            }, []);

            /**
             * –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
             * –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ç–æ–∫–µ–Ω—É
             */
            const checkAuth = async () => {
                const token = localStorage.getItem('token');
                if (token) {
                    try {
                        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        const userData = await api('/users/me');
                        setUser(userData);
                    } catch (err) {
                        // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω - —É–¥–∞–ª—è–µ–º –µ–≥–æ
                        localStorage.removeItem('token');
                    }
                }
                // –ó–∞–≤–µ—Ä—à–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                setLoading(false);
            };

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
             * –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
             */
            const handleLogin = () => {
                checkAuth();
            };

            /**
             * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞
             * –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
             */
            const handleLogout = () => {
                localStorage.removeItem('token');
                setUser(null);
            };

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            if (loading) {
                return <div className="text-center mt-5">Loading...</div>;
            }

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
            if (!user) {
                return <Login onLogin={handleLogin} />;
            }

            // –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            return (
                <>
                    {/* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */}
                    <Navbar user={user} onLogout={handleLogout} setActiveTab={setActiveTab} />
                    
                    {/* –ö–æ–Ω—Ç–µ–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ */}
                    {activeTab === 'movies' && <Movies isSuperuser={user.is_superuser} />}
                    {activeTab === 'favorites' && <Favorites />}
                    {activeTab === 'genres' && user.is_superuser && <Genres />}
                    {activeTab === 'directors' && user.is_superuser && <Directors />}
                </>
            );
        }

        // ============================================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        // ============================================================
        
        // –ù–∞—Ö–æ–¥–∏–º –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç –≤ DOM
        const root = ReactDOM.createRoot(document.getElementById('root'));
        
        // –†–µ–Ω–¥–µ—Ä–∏–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç App –≤ –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç
        root.render(<App />);
    </script>
    
    <!-- Bootstrap JavaScript - –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
